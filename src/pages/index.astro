---
import Card from "../components/Card.astro";
import Layout from "../layouts/Layout.astro";
import "../styles/index.css";
import { Summarize } from "../summarize.js";
const summarize = Summarize;
const mailTo = `mailto:${summarize.contact.email}`;
const callNumber = `tel:${summarize.contact.phone}`;
const linkedIn = `https://www.linkedin.com/in/${summarize.contact.social.linkedIn}`;
const github = `https://github.com/${summarize.contact.social.github}`;
const skillSets = function(){
let mappedSkillset = summarize.skillSets.map(x => {
return x.join(", ");
  });
  
return mappedSkillset.map(skillSet => {
    return `<p>${skillSet}</p>`
  });
};

const renderProj = function(proj: any){
  return `<div>
<div>${proj.name}</div>
<div>Position: ${proj.position}</div>
<div>Headcount: ${proj.headCount}</div>
<div>Technologies: ${proj.technology}</div>
<div>Main Responsibility: ${proj.mainResponsibility}</div>
<div>Description: ${proj.description}</div>
${proj.additionalInfo ? `<div>${proj.additionalInfo}</div>`: ''}
</div>`;
}

const renderCompanies = function(){
  return summarize.workHistories.map(x => {
    return `<div>
<div><span class="text-xl">${x.company}</span>
<span>${x.from} - ${x.to}</span>
</div>
${x.projects.map(y => renderProj(y))}
</div>`;
  });
};
---

<Layout title={summarize.name}>
  <main class="md:basis-1/2 basis-full bg-slate-950">
    <div class="resume-container">
      <div class="grid grid-cols-1 gap-4 md:grid-cols-4">
        <div class="flex flex-col col-span-1 bg-slate-600 p-2">
          <div class="text-2xl text-center">Personal Info</div>
          <div>
            <p><a href={callNumber}><span class="material-symbols-outlined">
call
</span>{summarize.contact.phone}</a></p> 
            <p><a href={mailTo}><span class="material-symbols-outlined">mail</span>{summarize.contact.email}</a></p> 
<p><span class="material-symbols-outlined">location_on</span>{summarize.contact.address}</p>  
            <p class="text-2xl">
<a target="_blank" href={linkedIn}><i class="devicon-linkedin-plain"></i></a> <a target="_blank" href={github}><i class="devicon-github-plain"></i></a></p>  
          </div>
        </div>
        
        <div class="flex flex-col col-span-1 md:col-span-3 bg-cyan-900 p-2">
          <div>
            <div class="text-2xl">Skills</div>
            <div set:html={skillSets()}></div>
          </div>
          <div>
            <div class="text-2xl">Projects</div>
            <div set:html={renderCompanies()}>  
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</Layout>
